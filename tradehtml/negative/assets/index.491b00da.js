"use strict";(self.webpackChunkcomb_trade=self.webpackChunkcomb_trade||[]).push([["vendors-node_modules_ok_trade-common_dist_module_setting_settingAction_js"],{1484:(t,n,e)=>{e.d(n,{A:()=>k});var r=e(89379),o=e(64467),i=e(5544),s=e(90675),u=e(10467),c=e(92901),a=e(23029),f=e(90548),p=e(44497),d=e(10816),g=e(99692),A=e(30682),v=e(10305),h=e(34653),l=e(30168),C=e(35715),M=e(27851),y=e(76538),m=e(35676),x=e(37618),w=e(29613),T=(0,c.A)((function t(){var n=this,e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).root,c=void 0===e?{}:e;(0,a.A)(this,t),this.init=function(){},this.initAccountConfig=function(){return n.getConfigs()},this.initTradeConfig=function(){return n.getConfigs()},this.getConfigs=(0,u.A)((0,s.A)().mark((function t(){var e;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.getConfigs();case 2:return e=t.sent,(0,p.runInAction)((function(){n.root.settingStore.configs=e})),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)}))),this.getCacheConfig=function(){var t=C.A.getCacheConfig();n.root.settingStore.cacheConfig=t},this.getCurrency=(0,u.A)((0,s.A)().mark((function t(){var e;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.getCurrency();case 2:return e=t.sent,(0,p.runInAction)((function(){n.root.settingStore.currency=e})),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)}))),this.getPreference=(0,u.A)((0,s.A)().mark((function t(){var e;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.getPreference();case 2:return e=t.sent,(0,p.runInAction)((function(){n.root.settingStore.preference=e})),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)}))),this.updateAccountConfig=function(t,e){var r=n.root.settingStore.configs,o=null===r||void 0===r?void 0:r.accountConfig;o&&(o[t]=e,"acctLv"===t&&e>o.maxLevel&&(o.maxLevel=e),(0,A.W5)()||m.hZ(l.pJ,r))},this.updateTradeConfig=function(t,e){var r=n.root.settingStore.configs,o=null===r||void 0===r?void 0:r.tradeConfig;o&&(o[t]=e,(0,A.W5)()||m.hZ(l.pJ,r))},this.updateCacheConfig=function(t,e){var r=n.root.settingStore.cacheConfig;r&&(r[t]=e,m.hZ(l.WS,r))},this.updateMgnModeConfig=function(t,e){var r=n.root.settingStore.mgnModeConfigs;r&&(r[t]=e,m.hZ(l.WU,r))},this.setMgnMode=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){var r,o,u,c,a,f,p,g,l,M,m,x,w,T,k,S,I,b,P,L,U,_,F;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.instType,u=e.mgnMode,c=e.type,a=void 0===c?h.VM.USER_CHANGE:c,f=e.instFamilyList,p=e.acctLv,g=e.isSetAllByInstType,l=void 0!==g&&g,M=e.batchMgnInstList,m=n.root.settingStore,x=m.accountConfig,w=m.mgnModeConfigs,T=m.isTradeAccount,k=m.isMultiAccount,S=m.isPmAccount,(0,A.W5)()){t.next=4;break}return t.abrupt("return");case 4:if(a!==h.VM.USER_CHANGE||!(S||T||k&&o===v.gy.MARGIN)||M){t.next=7;break}return w.baseMgnMode=u,t.abrupt("return");case 7:return I=M||[{marginMode:u,instFamilyList:f,instType:o,isSetAllByInstType:l}],b={type:a,accountMode:p||(null===x||void 0===x?void 0:x.acctLv),instList:a===h.VM.USER_CHANGE?I:[]},t.next=11,(0,d.A)(C.A.setInstMgnMode(b));case 11:if(P=t.sent,L=(0,i.A)(P,2),U=L[0],_=L[1],F=void 0===_?{}:_,!U){t.next=19;break}return U.msg&&y.A.error(U.msg),t.abrupt("return");case 19:null!==F&&void 0!==F&&null!==(r=F.data)&&void 0!==r&&r.length&&n.updateMgnModeConfig("instMarginModeConfigs",F.data);case 20:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.checkIsAllCrossMgnMode=(0,u.A)((0,s.A)().mark((function t(){var n,e,r,o,u;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,d.A)(C.A.getMgnModeConfigs());case 2:if(n=t.sent,e=(0,i.A)(n,2),r=e[1],null!==(o=(r||{}).instMarginModeConfigs||[])&&void 0!==o&&o.length){t.next=9;break}return t.abrupt("return",!1);case 9:return u=null===o||void 0===o?void 0:o.find((function(t){var n;return"isolated"===t.afterSetAllMarginMode||!!(null===(n=t.instList)||void 0===n?void 0:n.find((function(t){return"isolated"===t.marginMode})))})),t.abrupt("return",!u);case 11:case"end":return t.stop()}}),t)}))),this.getMgnModeConfigs=(0,u.A)((0,s.A)().mark((function t(){var e,r,o,u;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.root.settingStore.mgnModeConfigs,(void 0===e?{}:e).instMarginModeConfigs){t.next=8;break}return t.next=4,(0,d.A)(C.A.getMgnModeConfigs());case 4:r=t.sent,o=(0,i.A)(r,2),u=o[1],(0,p.runInAction)((function(){n.root.settingStore.mgnModeConfigs=u}));case 8:case"end":return t.stop()}}),t)}))),this.getMgnMode=function(t){var e,r,o=t.instType,i=t.instFamily,s=t.isPreMarket,u=void 0!==s&&s,c=n.root.settingStore,a=c.mgnModeConfigs,f=c.isPmAccount,p=c.isTradeAccount,d=c.accountConfig,g=c.isMultiAccount,A=a.baseMgnMode,l=a.instMarginModeConfigs,C=void 0===l?[]:l,M=(0,h.$L)({acctLv:null===d||void 0===d?void 0:d.acctLv,instType:o});if(u)return h.FL.ISOLATED;if(f||p||g&&o===v.gy.MARGIN)return A||M;if(g&&o===v.gy.SPOT)return M;if((null===C||void 0===C?void 0:C.length)<=0)return M;var y=(null===C||void 0===C||null===(e=C.find)||void 0===e?void 0:e.call(C,(function(t){return t.instType===o})))||{};return((null===(r=y.instList)||void 0===r?void 0:r.find((function(t){return t.instFamily===i})))||{}).marginMode||y.afterSetAllMarginMode||M},this.setCopyInstMgnMode=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){var r,o,u,c,a,f,p;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.instFamily,u=e.switchStatus,t.next=3,(0,d.A)(C.A.setCopyInstMgnMode({instFamily:o,switchStatus:u}));case 3:if(c=t.sent,a=(0,i.A)(c,2),f=a[0],p=a[1],!f){t.next=10;break}return f.msg&&y.A.error(f.msg),t.abrupt("return",Promise.reject());case 10:return n.updateMgnModeConfig("spotCopyInstSwitchConfig",(null===p||void 0===p||null===(r=p.data)||void 0===r?void 0:r[0])||{}),t.abrupt("return",Promise.resolve());case 12:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.resetMgnMode=function(){n.updateMgnModeConfig("baseMgnMode",null)},this.setTheme=function(t){n.root.settingStore.theme=t,(0,f.KN)({biz:h.hv,themeName:t})},this.setUpDownTimeZone=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){var r;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.setUpDownTimeZone(e);case 2:(r=n.root.settingStore.preference)&&(0,p.runInAction)((function(){r.upDownTimeZone=e}));case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setOrderConfirm=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.updateTradeConfig({type:h.PF.ORDER_CONFIRM,confirm:e});case 2:n.updateTradeConfig("confirm",e);case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setDepthSize=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.updateTradeConfig({type:h.PF.DEPTH_SIZE,depthCountConfirm:e});case 2:n.updateTradeConfig("depthCountConfirm",e);case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setTradeUnit=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){var r,i,u,c;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.instType,i=e.ctType,u=e.value,c=i===v.pn.LINEAR?"linearTradeUnit":r===v.gy.OPTION?"invertTradeUnit":"inverseFuturesUnit",t.next=4,C.A.updateTradeConfig((0,o.A)({type:h.PF.TRADE_UNIT},c,u));case 4:n.updateTradeConfig(c,u);case 5:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setGreekUnit=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.updateTradeConfig({type:h.PF.GREEKS_UNIT,greekUnit:e});case 2:n.updateTradeConfig("greekUnit",e);case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setNavigationMode=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.updateTradeConfig({type:h.PF.NAVIGATION_MODE,navigation:e});case 2:n.updateTradeConfig("navigation",e);case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setLiqPxSwitch=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.updateTradeConfig({type:h.PF.LIQ_PX,liqPxSwitch:e});case 2:n.updateTradeConfig("liqPxSwitch",e);case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setPositionMode=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.setPositionMode({posMode:e});case 2:y.A.success({content:(0,M.s3)("perp_top_toast_change_success")}),n.updateAccountConfig("posMode",e);case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setAutoLoan=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.setAutoLoan({autoLoan:e});case 2:n.updateAccountConfig("autoLoan",e);case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setCtIsoMode=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,A.W5)()){t.next=3;break}return n.updateAccountConfig("ctIsoMode",e),t.abrupt("return");case 3:return t.next=5,C.A.setIsoMode({isoMode:e,type:"CONTRACTS"});case 5:n.updateAccountConfig("ctIsoMode",e);case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setMgIsoMode=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,A.W5)()){t.next=3;break}return n.updateAccountConfig("mgnIsoMode",e),t.abrupt("return");case 3:return t.next=5,C.A.setIsoMode({isoMode:e,type:"MARGIN"});case 5:n.updateAccountConfig("mgnIsoMode",e);case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setSpotRiskOffset=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.setSpotOffset({type:e});case 2:n.updateAccountConfig("portfolioSpotRiskOffset",e);case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setMarginMode=function(t){n.updateCacheConfig("mgnMode",t)},this.setOpMarginMode=function(t){n.updateCacheConfig("opMgnMode",t)},this.setCurrencyUnit=function(t){var e,r,o=n.root.settingStore.currency,i=o.allCurrencyUnit,s=void 0===i?[]:i;return o.nowCurrencyUnit=s.find((function(n){var e=n.currencyId;return t.currencyId===e}))||o.nowCurrencyUnit,null===(e=(0,A.qX)())||void 0===e||null===(r=e.preference)||void 0===r?void 0:r.setUnit(t)},this.setUplPriceType=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.updateTradeConfig({type:h.PF.UPL_PRICES_TYPE,uplPriceType:e});case 2:n.updateTradeConfig("uplPriceType",e);case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setUsdLinearSettleCcy=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){var r,o,u,c;return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.usdLinearSettleCcy,t.next=3,(0,d.A)(C.A.setUsdLinearSettleCcy({settleCcy:r}));case 3:if(o=t.sent,u=(0,i.A)(o,1),!(c=u[0])){t.next=9;break}return y.A.error(c.msg),t.abrupt("return");case 9:n.updateAccountConfig("usdLinearSettleCcy",r);case 10:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.setFeeType=function(){var t=(0,u.A)((0,s.A)().mark((function t(e){return(0,s.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.A.setFeeType({feeType:e});case 2:n.updateAccountConfig("spotFeeCoinType",e);case 3:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),this.root=(0,r.A)({settingStore:w.A},c),(0,g.f)()||(0,p.makeObservable)(this,{init:p.action,getCacheConfig:p.action,updateAccountConfig:p.action,updateTradeConfig:p.action,updateCacheConfig:p.action,setTheme:p.action,setCurrencyUnit:p.action,setFeeType:p.action})}));const k=(0,x.A)("settingAction",T)},76538:(t,n,e)=>{e.d(n,{A:()=>s});var r=e(89379),o=e(26204),i=function(t){var n="object"===typeof t?null===t||void 0===t?void 0:t.content:t;return"string"===typeof n?n.trim():n};const s=(0,r.A)((0,r.A)({},o.A),{},{error:function(t){i(t)&&o.A.error(t)},success:function(t){i(t)&&o.A.success(t)}})}}]);
//# sourceMappingURL=https://static-daily.okg.com/crash/okfe/comb-trade/vendors-node_modules_ok_trade-common_dist_module_setting_settingAction_js/index.491b00da.js.map