"use strict";(self.webpackChunkcomb_trade=self.webpackChunkcomb_trade||[]).push([["vendors-node_modules_ok_okd_components_Picture_index_js"],{66345:(e,r,t)=>{t.d(r,{A:()=>T});var n=t(64467),o=t(89379),a=t(53986),c=t(41594),i=t(83573),s=t.n(i),u=t(88688),d=t(71075),l=t(19919),m=["alt","store"];function f(e,r){var t=e.alt,n=e.store,c=(0,a.A)(e,m),i=n.onLoad,s=n.onError,u=n.needSource,d=n.sourceSrcset,f=n.requestSrc,p=n.imgSrcSet,v=n.imgSrc;return v?(0,l.jsxs)(l.Fragment,{children:[u&&(0,l.jsx)("source",{srcSet:d}),(0,l.jsx)("img",(0,o.A)((0,o.A)({},c),{},{src:v,ref:r,srcSet:p,alt:t,onLoad:function(e){i(e,v,f)},onError:function(e){s(e,v,f)}}))]}):null}const p=(0,c.forwardRef)(f);new RegExp("(".concat("x-oss-process=image/","[^&]+&??)"));var v={cover:"cover",contain:"contain"};v.allAsArray=Object.values(v);var h={resize:"resize",crop:"crop"},g={sm:"(max-width: 767px)",md:"(min-width: 768px) and (max-width: 1023px)",lg:"(min-width: 1024px) and (max-width: 1269px)",xl:"(min-width: 1270px) and (max-width: 1859px)","2xl":"(min-width: 1860px) and (max-width: 2036px)","3xl":"(min-width: 2037px)"},S=t(5544),x=t(84854),A=["media","type","src","resize","crop","w","h"],b="x-oss-process=image/",w=new RegExp("(".concat(b,"[^&]+&??)")),z="format,webp",y="/ignore-error,1",E={resize:"resize",crop:"crop"};function R(e){return!!(e&&e.startsWith("data:")&&e.includes("base64,"))}function j(e){return e&&e.startsWith("blob:")}function W(e){return e.includes(z)}function D(e){var r=x.A.cdnDomainMap,t=void 0===r?{}:r,n="";return!e.includes(x.A.cdnBaseUrl)&&Object.values(t).some((function(r){return!!e.includes(r)&&(n=r,!0)}))?e.replace(n,x.A.cdnBaseUrl):e}function I(e){return e.includes(y)?"".concat(e.replace(y,"")).concat(y):"".concat(e).concat(y)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,t=e;return e.includes(r)?e:(t.indexOf(b)>-1?t=t.replace(w,"$1/".concat(r)):-1!==t.indexOf("?")?t+="&".concat(b).concat(r):t+="?".concat(b).concat(r),I(t))}function N(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=e;return t?j(e)?e:(t=D(function(e){return e.replace(/\s/g,"%20")}(e)),r?_(t,z):t):""}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;if(!r)return"";var n=Object.entries(e).map((function(e){var r,t=(0,S.A)(e,2),n=t[0],o=t[1];return o?"".concat((r=n,r[0]),"_").concat(o):""})).filter(Boolean).join(",");return n?_(r,"".concat(t,",").concat(n,",type_6")):r},L=function(e,r){return e.map((function(e){var t=e.media,n=e.type,c=void 0===n?E.resize:n,i=e.src,s=e.resize,u=e.crop,d=e.w,l=e.h,m=(0,a.A)(e,A),f=c;u&&(f=E.crop),s&&(f=E.resize);var p=k(s||u||{width:d,height:l},i||r,f);return(0,o.A)({media:t,src:p},m)}))},O=function(e){var r=e.srcSetData,t=e.resize,n=e.useWebp;return r.map((function(e){var r=k(t,N(e.src,n),E.resize);return"".concat(r," ").concat(e.size)})).join(",")};var M=["media","src"];function C(e){var r=e.mediaSource,t=e.isErrorState,n=e.useWebp;return r.map((function(e,r){var i=e.media,s=e.src,u=(0,a.A)(e,M),d=g[i]||i,m=s;return m&&!t?(0,l.jsxs)(c.Fragment,{children:[n&&!W(m)&&(0,l.jsx)("source",(0,o.A)({media:d,srcSet:N(m)},u)),(0,l.jsx)("source",{media:d,srcSet:m})]},d||r):null}))}var F=t(77810),H=["top","bottom","right","left"];var P=t(22822);var q=["src","alt","layout","lazyload","className","useWebp","placeholder","errorImg","width","height","style","pictureClassName","pictureStyle","resize","originWidth","originHeight","mediaData","ssrRendered","srcSetData","getImgRef"],B="".concat(d.H3,"-picture");function U(e){var r=u.A.useMergeProps(U.defaultPropsValue,e),t=r.src,i=r.alt,d=r.layout,m=r.lazyload,f=r.className,v=r.useWebp,x=r.placeholder,A=(r.errorImg,r.width),b=r.height,w=r.style,z=r.pictureClassName,y=r.pictureStyle,E=(r.resize,r.originWidth),D=r.originHeight,I=(r.mediaData,r.ssrRendered),_=(r.srcSetData,r.getImgRef),M=(0,a.A)(r,q),T=!R(t)&&!j(t)&&v,V=function(e){var r=e.errorImg,t=e.src,n=e.onError,a=e.onLoad,i=e.mediaData,s=e.resize,u=e.useWebp,d=e.srcSetData,l=e.lazyload,m=L(i,t),f=(0,c.useRef)(new Map),p=(0,c.useState)(!t),v=(0,S.A)(p,2),g=v[0],x=v[1],A=(0,c.useState)(g&&!r),b=(0,S.A)(A,2),w=b[0],z=b[1],y=(0,c.useState)(!1),E=(0,S.A)(y,2),R=E[0],j=E[1],D=(0,c.useMemo)((function(){var e,r;return d.length>0&&(e=O({srcSetData:d,resize:s,useWebp:!1}),r=O({srcSetData:d,resize:s,useWebp:u})),{imgSrcSet:e,sourceSrcSet:r}}),[d,s,u]),I=g&&r,_=(0,c.useMemo)((function(){var e=I?r:t,n=I?N(e,!1):k(s,N(e,!1),h.resize),o=k(s,N(e,u),h.resize),a=u&&!W(n),c=D.sourceSrcSet||o;return{imgSrc:n,sourceSrc:o,requestSrc:a?c:n,needSource:a,sourceSrcset:c}}),[D,I,t,s,u,r]);return(0,c.useEffect)((function(){g&&t&&x(!1),w&&t&&z(!1)}),[t]),(0,o.A)((0,o.A)({onError:function(e,t,o){f.current.set(o,{onerror:!0}),x(!0),n(e,t),r?t==r&&z(!0):z(!0)},onLoad:function(e,r,t){f.current.set(t,{onload:!0}),l&&j(!0),a(e)},isLoaded:R,isFallbackError:w,isErrorState:I,mediaSource:m,loadedImages:f},D),_)}((0,o.A)((0,o.A)({},r),{},{useWebp:T})),Y=V.isLoaded,$=V.isFallbackError,G=V.isErrorState,J=V.mediaSource,K=function(e){var r=e.store,t=e.ssrRendered,n=r.onError,o=r.onLoad,a=r.mediaSource,i=r.loadedImages,s=r.requestSrc,u=(0,P.A)().media,d=(0,c.useRef)(null);return(0,c.useEffect)((function(){if(t&&d.current){var e,r=d.current,c=r.complete,l=r.naturalHeight,m=a&&(null===(e=a.find((function(e){return e.media===g[u]})))||void 0===e?void 0:e.src)||s;c&&!i.current.has(m)&&(l>0?o(d.current,s,m):n(d.current,s,m))}}),[]),{imgRef:d}}({store:V,ssrRendered:I}),Q=K.imgRef,X=function(e){var r=(0,c.useRef)(null),t=(0,c.useState)(!e),n=(0,S.A)(t,2),i=n[0],s=n[1];return(0,c.useEffect)((function(){if(e){var t,n="object"===typeof e?e:{},c=n.top,u=void 0===c?0:c,d=n.bottom,l=void 0===d?0:d,m=n.right,f=void 0===m?0:m,p=n.left,v=void 0===p?0:p,h=(0,a.A)(n,H),g="".concat(u,"px ").concat(f,"px ").concat(l,"px ").concat(v,"px"),S=!1;r.current&&!i&&(F.A.IntersectionObserver?(t=new F.A.IntersectionObserver((function(e){e.forEach((function(e){!S&&(e.intersectionRatio>0||e.isIntersecting)&&s(!0)}))}),(0,o.A)({threshold:.01,rootMargin:g},h))).observe(r.current):s(!0));var x=r.current;return function(){S=!0,t&&t.unobserve&&x&&(t.unobserve(x),t=null)}}}),[e]),{imageRef:r,visible:i,lazyload:e}}(m),Z=X.imageRef,ee=X.visible,re=$||m&&!Y&&!ee,te=(0,o.A)({width:A,height:b},w);return(0,l.jsxs)("picture",{className:s()(u.A.data.okdNamespace,B,z,(0,n.A)({},"".concat(B,"-font"),!re)),ref:Z,style:y,children:[ee&&!$&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C,{mediaSource:J,isErrorState:G,useWebp:T}),(0,l.jsx)(p,(0,o.A)((0,o.A)({},M),{},{store:V,ref:function(e){Q.current=e,null===_||void 0===_||_(e)},width:E||A,height:D||b,style:te,className:s()(d&&"".concat(B,"-").concat(d),f),alt:i}))]}),re&&x]})}U.defaultPropsValue={resize:void 0,layout:void 0,lazyload:!1,className:"",pictureClassName:"",style:{},pictureStyle:{},useWebp:!0,placeholder:void 0,errorImg:null,mediaData:[],srcSetData:[],onError:function(){},onLoad:function(){},width:void 0,height:void 0,originWidth:void 0,originHeight:void 0,src:void 0,alt:"",ssrRendered:!1},U.MEDIA=g,U.LAYOUT=v,U.ACTION=h;const T=U}}]);
//# sourceMappingURL=https://static-daily.okg.com/crash/okfe/comb-trade/vendors-node_modules_ok_okd_components_Picture_index_js/index.7b27f027.js.map