"use strict";(self.webpackChunkcomb_trade=self.webpackChunkcomb_trade||[]).push([["src_common_pages_trade_modules_TradeDialogs_CollateralCoinDialogs_core_index_tsx-src_common_f-e64599"],{98732:(e,t,i)=>{i.d(t,{y:()=>n});var n=400},39351:(e,t,i)=>{i.d(t,{A:()=>l,O:()=>d});var n=i(89379),o=i(53986),a=(i(41594),i(4613)),c=i(98732),s=i(19919),r=["children"];const l=function(e){var t=e.children,i=(0,o.A)(e,r);return(0,s.jsx)(a.A,(0,n.A)((0,n.A)({size:a.A.SIZE.sm,delayShow:c.y,alwaysUpdatePopper:!0},i),{},{children:t}))};var d=a.A.DIRECTION},42182:(e,t,i)=>{i.d(t,{Ml:()=>o,t0:()=>a,x7:()=>n});var n=function(){},o=[],a={}},8851:(e,t,i)=>{i.d(t,{A:()=>b});var n=i(90675),o=i(5544),a=i(10467),c=i(89379),s=i(92901),r=i(23029),l=i(44497),d=i(63129),u=i(10816),h=i(4536),_=i(26204),A=i(1484),m=i(28494),v=i(5249),f=i(59169),p=i(42182),y=i(63510),g=i(73942),x=i(94813),C=i(21128);const b=new((0,s.A)((function e(){var t=this;(0,r.A)(this,e),this.onConfirm=void 0,this.onClose=void 0,this.onCustomClick=void 0,this.equityHandler=function(){},this.init=function(e){t.onConfirm=e.onConfirm,t.onClose=e.onClose,t.onCustomClick=e.onCustomClick,C.A.update({visible:e.visible,isFromSwitchAccount:e.isFromSwitchAccount}),t.getCoinList(),t.equityHandler=(0,l.reaction)((function(){return{activeType:C.A.activeType,isFromSwitchAccount:C.A.isFromSwitchAccount}}),(function(){var e=d.o.get();C.A.updateByKey("equityId",e),t.getEquityHandler()}),{fireImmediately:!0,delay:300})},this.destroy=function(){t.equityHandler()},this.showDialog=function(e){t.init((0,c.A)((0,c.A)({},e),{},{visible:!0}))},this.closeDialog=function(){var e;C.A.updateByKey("visible",!1),t.destroy(),null===(e=t.onClose)||void 0===e||e.call(t)},this.getCoinList=(0,a.A)((0,n.A)().mark((function e(){var t,i,a,c;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.A.updateByKey("contentLoading",!0),e.next=3,(0,u.A)(y.A.getCollateralAssets());case 3:if(t=e.sent,i=(0,o.A)(t,2),a=i[0],c=i[1],!a){e.next=11;break}return C.A.updateByKey("contentLoading",!1),(0,f.t6)(a),e.abrupt("return",Promise.reject(a));case 11:return C.A.updateByKey("contentLoading",!1),C.A.update({coinInfo:c||{},activeType:c.recommendGroup||""}),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)}))),this.handleCardClick=function(e){if(e===x.hQ.CUSTOM)return(0,v.R3e)(),void t.handleShowCustomSettingDialog();C.A.updateByKey("activeType",e)},this.handleShowCustomSettingDialog=function(){t.onCustomClick?t.onCustomClick():g.A.showDialog({isFromSwitchAccount:C.A.isFromSwitchAccount,onConfirm:function(){t.closeDialog()},onClose:function(){t.getEquityHandler()}})},this.getConfirmParams=function(){var e={},t=C.A.activeType;return t===x.hQ.ALL&&C.A.coinInfo.coinDetails.forEach((function(t){e[t.ccy]=!0})),t===x.hQ.STABLE&&C.A.coinInfo.coinDetails.forEach((function(t){e[t.ccy]=[t.stableCoin,t.required,t.existOrdOrPos,t.existBorrowing].includes(x.yo.ENABLE)})),e},this.handleConfirm=function(){if(C.A.activeType!==x.hQ.CUSTOM){var e;if(C.A.isFromSwitchAccount)return null===(e=t.onConfirm)||void 0===e||e.call(t,t.getConfirmParams()),void t.closeDialog();t.handleSettingConfirm()}else t.handleShowCustomSettingDialog()},this.handleSettingConfirm=(0,a.A)((0,n.A)().mark((function e(){var i,a,c,s,r;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.A.updateByKey("confirmLoading",!0),a=t.getRequestParams(),e.next=4,(0,u.A)(y.A.postCollateralAssets(a));case 4:if(c=e.sent,s=(0,o.A)(c,1),r=s[0],C.A.updateByKey("confirmLoading",!1),!r){e.next=11;break}return(0,f.t6)(r),e.abrupt("return");case 11:A.A.getConfigs(),_.A.success((0,h.kW)("trade_home_toast_margin_crypto_set")),t.closeDialog(),null===(i=t.onConfirm)||void 0===i||i.call(t);case 15:case"end":return e.stop()}}),e)}))),this.getRequestParams=function(){var e=[],t=C.A.activeType;if(t===x.hQ.ALL)return e.push({type:x.Xk.ALL,ccyList:[],collateralEnabled:!0}),e;var i=[],n=[];return t===x.hQ.STABLE&&C.A.coinInfo.coinDetails.forEach((function(e){e.stableCoin===x.yo.ENABLE?i.push(e.ccy):n.push(e.ccy)})),t===x.hQ.CUSTOM&&C.A.coinInfo.coinDetails.forEach((function(e){e.collateralEnabled===x.yo.ENABLE?i.push(e.ccy):n.push(e.ccy)})),i.length&&e.push({type:x.Xk.CUSTOM,ccyList:i,collateralEnabled:!0}),n.length&&e.push({type:x.Xk.CUSTOM,ccyList:n,collateralEnabled:!1}),e},this.getEquityHandler=function(){C.A.isFromSwitchAccount?t.getEquityBeforeSwitch(C.A.equityId):t.getEquity(C.A.equityId)},this.getEquity=function(){var e=(0,a.A)((0,n.A)().mark((function e(i){var a,c,s,r,l,d,h,A,m;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.A.updateByKey("equityCalculating",!0),a=t.getRequestParams(),e.next=4,(0,u.A)(y.A.postCollateralAssetsPreCheck(a));case 4:if(c=e.sent,s=(0,o.A)(c,2),r=s[0],l=s[1],d=void 0===l?{}:l,i===C.A.equityId){e.next=11;break}return e.abrupt("return");case 11:if(!r){e.next=15;break}return C.A.updateByKey("equityCalculating",!1),_.A.error((null===r||void 0===r?void 0:r.msg)||(null===r||void 0===r||null===(h=r.data)||void 0===h?void 0:h.msg)),e.abrupt("return");case 15:A=d.data,m=void 0===A?[]:A,C.A.update({equityCalculating:!1,equityData:(null===m||void 0===m?void 0:m[0])||{}});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getEquityBeforeSwitch=function(){var e=(0,a.A)((0,n.A)().mark((function e(i){var a,c,s,r,l,d,h,A,v,f,p,g,x;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.A.updateByKey("equityCalculating",!0),l=t.getRequestParams(),e.next=4,(0,u.A)(y.A.postCollateralAssetsSwitchPreCheck({acctLv:m.nj.MULTI,collateralCoinConfigs:l}));case 4:if(d=e.sent,h=(0,o.A)(d,2),A=h[0],v=h[1],f=void 0===v?{}:v,i===C.A.equityId){e.next=11;break}return e.abrupt("return");case 11:if(!A){e.next=15;break}return C.A.updateByKey("equityCalculating",!1),_.A.error((null===A||void 0===A?void 0:A.msg)||(null===A||void 0===A||null===(p=A.data)||void 0===p?void 0:p.msg)),e.abrupt("return");case 15:g=f.data,x=void 0===g?[]:g,C.A.update({equityCalculating:!1,equityData:{acctAvaMargin:(null===x||void 0===x||null===(a=x[0])||void 0===a||null===(c=a.mgnAft)||void 0===c?void 0:c.acctAvailEq)||"",acctAdjEquity:(null===x||void 0===x||null===(s=x[0])||void 0===s||null===(r=s.mgnAft)||void 0===r?void 0:r.acctAdjEq)||""}});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.onConfirm=p.x7,this.onClose=p.x7,this.onCustomClick=void 0})))},21128:(e,t,i)=>{i.d(t,{A:()=>d});var n=i(23029),o=i(92901),a=i(39874),c=i(85501),s=i(44497),r=i(76196),l=i(94813);const d=new(function(e){function t(){var e;return(0,n.A)(this,t),(e=(0,a.A)(this,t)).coinInfo={recommendGroup:l.hQ.ALL,coinDetails:[]},e.contentLoading=!1,e.confirmLoading=!1,e.activeType=l.hQ.ALL,e.visible=!1,e.isFromSwitchAccount=!1,e.equityCalculating=!1,e.equityId=0,e.equityData={},(0,s.makeObservable)(e,{coinInfo:s.observable,contentLoading:s.observable,selectedCoinNum:s.computed,selectedCoins:s.computed,enableStableSelect:s.computed,activeType:s.observable,visible:s.observable,confirmLoading:s.observable,isFromSwitchAccount:s.observable,equityCalculating:s.observable,equityData:s.observable,equityId:s.observable}),e}return(0,c.A)(t,e),(0,o.A)(t,[{key:"selectedCoins",get:function(){var e,t;return null===(e=this.coinInfo)||void 0===e||null===(t=e.coinDetails)||void 0===t?void 0:t.filter((function(e){return e.collateralEnabled===l.yo.ENABLE}))}},{key:"selectedCoinNum",get:function(){var e;return(null===(e=this.selectedCoins)||void 0===e?void 0:e.length)||0}},{key:"stableCoins",get:function(){return this.coinInfo.coinDetails.filter((function(e){return e.stableCoin===l.yo.ENABLE}))||[]}},{key:"enableStableSelect",get:function(){return!this.coinInfo.coinDetails.some((function(e){return e.stableCoin===l.yo.DISABLE&&[e.existOrdOrPos,e.existBorrowing,e.required].includes(l.yo.ENABLE)}))}}])}(r.A))},73942:(e,t,i)=>{i.d(t,{A:()=>S});var n=i(90675),o=i(5544),a=i(10467),c=i(89379),s=i(92901),r=i(23029),l=i(4473),d=i(68341),u=i(44497),h=i(63129),_=i(10816),A=i(4536),m=i(26204),v=i(30631),f=i(1484),p=i(42182),y=i(28494),g=i(5249),x=i(63510),C=i(59169),b=i(94813),k=i(83591),j=(0,d.A)("batchSelect");const S=new((0,s.A)((function e(){var t=this;(0,r.A)(this,e),this.onConfirm=void 0,this.onClose=void 0,this.equityHandler=function(){},this.tempSelectedCoins=void 0,this.init=function(e){t.onConfirm=e.onConfirm,t.onClose=e.onClose,t.tempSelectedCoins=e.selectedCoins,k.A.update({visible:e.visible,searchText:"",isFromSwitchAccount:e.isFromSwitchAccount}),t.getCoinList(),t.equityHandler=(0,u.reaction)((function(){return{num:k.A.selectedCoinNum,isFromSwitchAccount:k.A.isFromSwitchAccount}}),(function(e){var i=e.isFromSwitchAccount,n=h.o.get();k.A.updateByKey("equityId",n),i?t.getEquityBeforeSwitch(n):t.getEquity(n)}),{fireImmediately:!1,delay:300})},this.destroy=function(){t.equityHandler()},this.showDialog=function(e){t.init((0,c.A)((0,c.A)({},e),{},{visible:!0}))},this.closeDialog=function(){var e;k.A.update({visible:!1,isFromSwitchAccount:!1,searchText:"",equityData:{},coinSelectMap:{}}),t.destroy(),null===(e=t.onClose)||void 0===e||e.call(t)},this.getCoinList=(0,a.A)((0,n.A)().mark((function e(){var i,a,c,s,r;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.A.updateByKey("contentLoading",!0),e.next=3,(0,_.A)(x.A.getCollateralAssets());case 3:if(i=e.sent,a=(0,o.A)(i,2),c=a[0],s=a[1],!c){e.next=10;break}return(0,C.t6)(c),e.abrupt("return",Promise.reject(c));case 10:return r=t.getCoinSelectMap(null===s||void 0===s?void 0:s.coinDetails),k.A.updateByKey("contentLoading",!1),k.A.update({coinList:(null===s||void 0===s?void 0:s.coinDetails)||[],coinSelectMap:r}),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)}))),this.getCoinSelectMap=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i={},n=0;n<e.length;n+=1){var o=e[n],a=o.ccy,c=o.collateralEnabled,s=o.existOrdOrPos,r=o.required,l=o.existBorrowing,d=o.enableRelationCcyList;t.tempSelectedCoins?i[a]=t.tempSelectedCoins[o.ccy]:k.A.coinSelectMap[o.ccy]||c===b.yo.ENABLE||s===b.yo.ENABLE||r===b.yo.ENABLE||l===b.yo.ENABLE?(i[o.ccy]=!0,d&&d.length>0&&d.forEach((function(e){i[e]=!0}))):i[o.ccy]=!1}return i},this.getEquity=function(){var e=(0,a.A)((0,n.A)().mark((function e(i){var a,c,s,r,l,d,u,h,A;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.A.updateByKey("equityCalculating",!0),a=t.getRequestParams(),e.next=4,(0,_.A)(x.A.postCollateralAssetsPreCheck(a));case 4:if(c=e.sent,s=(0,o.A)(c,2),r=s[0],l=s[1],d=void 0===l?{}:l,i===k.A.equityId){e.next=11;break}return e.abrupt("return");case 11:if(!r){e.next=15;break}return k.A.updateByKey("equityCalculating",!1),m.A.error((null===r||void 0===r?void 0:r.msg)||(null===r||void 0===r||null===(u=r.data)||void 0===u?void 0:u.msg)),e.abrupt("return");case 15:h=d.data,A=void 0===h?[]:h,k.A.update({equityCalculating:!1,equityData:(null===A||void 0===A?void 0:A[0])||{}});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getEquityBeforeSwitch=function(){var e=(0,a.A)((0,n.A)().mark((function e(i){var a,c,s,r,l,d,u,h,A,v,f,p,g;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.A.updateByKey("equityCalculating",!0),l=t.getRequestParams(),e.next=4,(0,_.A)(x.A.postCollateralAssetsSwitchPreCheck({acctLv:y.nj.MULTI,collateralCoinConfigs:l}));case 4:if(d=e.sent,u=(0,o.A)(d,2),h=u[0],A=u[1],v=void 0===A?{}:A,i===k.A.equityId){e.next=11;break}return e.abrupt("return");case 11:if(!h){e.next=15;break}return k.A.updateByKey("equityCalculating",!1),m.A.error((null===h||void 0===h?void 0:h.msg)||(null===h||void 0===h||null===(f=h.data)||void 0===f?void 0:f.msg)),e.abrupt("return");case 15:p=v.data,g=void 0===p?[]:p,k.A.update({equityCalculating:!1,equityData:{acctAvaMargin:(null===g||void 0===g||null===(a=g[0])||void 0===a||null===(c=a.mgnAft)||void 0===c?void 0:c.acctAvailEq)||"",acctAdjEquity:(null===g||void 0===g||null===(s=g[0])||void 0===s||null===(r=s.mgnAft)||void 0===r?void 0:r.acctAdjEq)||""}});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.handleConfirm=function(){var e;if(k.A.isFromSwitchAccount)return null===(e=t.onConfirm)||void 0===e||e.call(t,k.A.coinSelectMap),void t.closeDialog();t.handleSettingConfirm()},this.handleSettingConfirm=(0,a.A)((0,n.A)().mark((function e(){var i,a,c,s,r;return(0,n.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.A.updateByKey("confirmLoading",!0),a=t.getRequestParams(),e.next=4,(0,_.A)(x.A.postCollateralAssets(a));case 4:if(c=e.sent,s=(0,o.A)(c,1),r=s[0],k.A.updateByKey("confirmLoading",!1),!r){e.next=11;break}return(0,C.t6)(r),e.abrupt("return");case 11:f.A.getConfigs(),m.A.success((0,A.kW)("trade_home_toast_margin_crypto_set")),t.closeDialog(),null===(i=t.onConfirm)||void 0===i||i.call(t);case 15:case"end":return e.stop()}}),e)}))),this.handleCoinSelectChange=function(e,i){t.checkCannotDisable(e,i)||t.checkRelationCcy(e,i)||(k.A.coinSelectMap[e.ccy]=i)},this.handleRelationConfirm=function(e){var i=e.dialog,n=e.coin,o=e.checked,a=e.relationCcyList,c=n.ccy;if(!o&&a.some((function(e){var i=k.A.coinList.find((function(t){return t.ccy===e}));return i&&t.checkCannotDisable(i,o)})))return void i.destroy();k.A.coinSelectMap[c]=o,a.forEach((function(e){k.A.coinSelectMap[e]=o})),i.destroy()},this.checkRelationCcy=function(e,i){var n=e.ccy,o=e.enableRelationCcyList,a=e.disableRelationCcyList,c=[],s=!1,r=!1;if(i&&(null===o||void 0===o?void 0:o.length)>0){var l=o.filter((function(e){return!k.A.coinSelectMap[e]}));l.length>0&&(s=!0,c=l)}if(!i&&(null===a||void 0===a?void 0:a.length)>0){var d=a.filter((function(e){return k.A.coinSelectMap[e]}));d.length>0&&(r=!0,c=d)}if(s||r){var u=c.join(","),h=s?(0,A.kW)("trade_home_dialog_both_enable",{ccy:n,ccyCollateral:u}):(0,A.kW)("trade_home_dialog_both_disable",{ccy:n,ccyCollateral:u}),_=v.A.confirmation({children:h,onConfirm:function(){t.handleRelationConfirm({dialog:_,coin:e,checked:i,relationCcyList:c})},onCancel:function(){_.destroy()},cancelText:(0,A.kW)("commonall_text_btn_cancel"),confirmText:(0,A.kW)("commonall_text_btn_confirm")});return!0}return!1},this.checkCannotDisable=function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.existOrdOrPos,o=e.existBorrowing;return!(t||n!==b.yo.ENABLE&&o!==b.yo.ENABLE)&&(i&&m.A.error((0,A.kW)("trade_home_toast_error_crypto_has_open_orders_positions")),!0)},Object.defineProperty(this,j,{writable:!0,value:function(e,i,n){i.forEach((function(i){i.required===b.yo.ENABLE||!n&&t.checkCannotDisable(i,n,!1)||(e[i.ccy]=n)}))}}),this.handleQuickSelectChange=function(e,i){var n={};(0,g.CJL)(),e===b.hQ.STABLE&&(0,l.A)(t,j)[j](n,k.A.stableCoins,i),e===b.hQ.TOP&&(0,l.A)(t,j)[j](n,k.A.topCoins,i),e===b.hQ.ALL&&(0,l.A)(t,j)[j](n,k.A.coinList,i),k.A.update({coinSelectMap:(0,c.A)((0,c.A)({},k.A.coinSelectMap),n)})},this.handleSearch=function(e){k.A.updateByKey("searchText",e)},this.getRequestParams=function(){var e=[],t=k.A.coinSelectMap,i=k.A.isAllCoinsSelect,n=[],a=[];return Object.entries(t).forEach((function(e){var t=(0,o.A)(e,2),i=t[0];t[1]?n.push(i):a.push(i)})),n.length&&e.push({type:i?b.Xk.ALL:b.Xk.CUSTOM,ccyList:n,collateralEnabled:!0}),a.length&&e.push({type:"custom",ccyList:a,collateralEnabled:!1}),e},this.onConfirm=p.x7,this.onClose=p.x7})))},83591:(e,t,i)=>{i.d(t,{A:()=>d});var n=i(23029),o=i(92901),a=i(39874),c=i(85501),s=i(44497),r=i(76196),l=i(94813);const d=new(function(e){function t(){var e;return(0,n.A)(this,t),(e=(0,a.A)(this,t)).visible=!1,e.coinList=[],e.coinSelectMap={},e.searchText="",e.contentLoading=!1,e.equityCalculating=!1,e.equityId=0,e.equityData={},e.confirmLoading=!1,e.isFromSwitchAccount=!1,(0,s.makeObservable)(e,{coinList:s.observable,coinSelectMap:s.observable,confirmLoading:s.observable,contentLoading:s.observable,equityCalculating:s.observable,equityData:s.observable,equityId:s.observable,isAllCoinsSelect:s.computed,isAllStableSelect:s.computed,isAllTopSelect:s.computed,isFromSwitchAccount:s.observable,searchText:s.observable,selectedCoinNum:s.computed,stableCoins:s.computed,topCoins:s.computed,visible:s.observable}),e}return(0,c.A)(t,e),(0,o.A)(t,[{key:"topCoins",get:function(){return this.coinList.filter((function(e){return e.topCoin===l.yo.ENABLE}))||[]}},{key:"stableCoins",get:function(){return this.coinList.filter((function(e){return e.stableCoin===l.yo.ENABLE}))||[]}},{key:"isAllTopSelect",get:function(){var e,t,i=this;return(null===(e=this.topCoins.filter((function(e){return i.coinSelectMap[e.ccy]})))||void 0===e?void 0:e.length)===(null===(t=this.topCoins)||void 0===t?void 0:t.length)}},{key:"isAllStableSelect",get:function(){var e,t,i=this;return(null===(e=this.stableCoins.filter((function(e){return i.coinSelectMap[e.ccy]})))||void 0===e?void 0:e.length)===(null===(t=this.stableCoins)||void 0===t?void 0:t.length)}},{key:"isAllCoinsSelect",get:function(){var e,t,i=this;return(null===(e=this.coinList.filter((function(e){return i.coinSelectMap[e.ccy]})))||void 0===e?void 0:e.length)===(null===(t=this.coinList)||void 0===t?void 0:t.length)}},{key:"filteredCoinList",get:function(){var e=this;return this.searchText?this.coinList.filter((function(t){return t.ccy.includes(e.searchText.toUpperCase())})):this.coinList}},{key:"selectedCoinNum",get:function(){return Object.values(this.coinSelectMap).filter((function(e){return e})).length}}])}(r.A))},61851:(e,t,i)=>{i.d(t,{HQ:()=>z,sJ:()=>Be,dp:()=>ot,yo:()=>v.yo});var n=i(53986),o=i(41594),a=i(83573),c=i.n(a),s=i(41140),r=i(4536),l=i(63010),d=i(75170),u=i(30631),h=i(49047),_=i(47612),A=i(7570),m=i(73437),v=i(94813),f=i(92901),p=i(23029),y=i(42182),g=i(8851),x=i(39874),C=i(85501),b=i(44497),k=i(29613);const j=new(function(e){function t(){var e;return(0,p.A)(this,t),(e=(0,x.A)(this,t)).visible=!1,e.isFromAssets=!1,(0,b.makeObservable)(e,{visible:b.observable,isFromAssets:b.observable}),e}return(0,C.A)(t,e),(0,f.A)(t,[{key:"enableDialog",get:function(){var e=k.A.isMultiAccount,t=k.A.collateralCoinConfig,i=void 0===t?{}:t,n=i.enabledFeature,o=i.existConfig;return e&&n===v.yo.ENABLE&&o===v.yo.DISABLE}}])}(i(76196).A));const S=new((0,f.A)((function e(){var t=this;(0,p.A)(this,e),this.onConfirm=void 0,this.onClose=void 0,this.init=function(e){t.onConfirm=e.onConfirm,t.onClose=e.onClose,j.update({visible:e.visible,isFromAssets:e.isFromAssets})},this.closeDialog=function(){var e;j.updateByKey("visible",!1),j.isFromAssets||l.A.set("collateralCoinGuideDialogShowed","1"),null===(e=t.onClose)||void 0===e||e.call(t)},this.handleConfirm=function(){var e;j.isFromAssets||g.A.showDialog(),t.closeDialog(),null===(e=t.onConfirm)||void 0===e||e.call(t)},this.onConfirm=y.x7,this.onClose=y.x7}))),w="index_collateral-coin-guide-dialog-content__bGGha",E="index_guide-desc__GFL83",N="index_cards-wrapper__I476V",L="index_coins-card__Y+kQY",q="index_other-card__6EN+N",T="index_card-text__jSPEp",B="index_card-title__FJvqI",D="index_card__+kXBB",W="index_icons-wrapper__H+kts",I="index_icon-box__Dj6ef",M="index_icon__Qr12v",P="index_icon-bg__Nx5bn",F="index_check-icon__fWSEr",O="index_other-icon-wrapper__u-rHw",Q="index_other-icon__YplfU",R="index_arrow-wrapper__v2V5G",K="index_arrow-icon__Ed4Pf",G="index_options-wrapper__6FsXo",U="index_more-info__ENqsx",Y="index_more-info-link__12UAe";var Z=i(19919),H=["onConfirm","onClose","isFromAssets","title","desc","instDesc","confirmText"];const z=(0,s.observer)((function(e){var t=e.onConfirm,i=e.onClose,a=e.isFromAssets,s=e.title,f=void 0===s?(0,r.kW)("trade_home_header_now_set_margin_collateral"):s,p=e.desc,y=void 0===p?(0,r.kW)("trade_home_select_desc_choose_collateral_crypto"):p,g=e.instDesc,x=void 0===g?(0,r.kW)("trade_home_title_non_collateral_spot_futures_options"):g,C=e.confirmText,b=void 0===C?(0,r.kW)("trade_home_dialog_btn_go_to_settings"):C,k=(0,n.A)(e,H),z=j.enableDialog,X=j.visible;return(0,o.useEffect)((function(){var e=!l.A.get("collateralCoinGuideDialogShowed");(!a&&z&&e||k.visible)&&S.init({onClose:i,onConfirm:t,visible:!0,isFromAssets:a})}),[z,k.visible,a]),(0,Z.jsx)(u.A.Action,{visible:X,title:f,onConfirm:S.handleConfirm,onClose:S.closeDialog,confirmText:b,width:v.eX,children:(0,Z.jsxs)("div",{className:w,children:[(0,Z.jsx)("div",{className:E,children:y}),(0,Z.jsxs)("div",{className:N,children:[(0,Z.jsxs)("div",{className:L,children:[(0,Z.jsxs)("div",{className:c()(D),children:[(0,Z.jsx)("div",{className:c()(B),children:(0,r.kW)("trade_home_title_collateral_crypto")}),(0,Z.jsxs)("div",{className:W,children:[(0,Z.jsxs)("div",{className:I,children:[(0,Z.jsx)(A.A,{ccy:"BTC",className:M}),(0,Z.jsx)("div",{className:P,children:(0,Z.jsx)(h.A,{className:c()("okx-trading-selected",F)})})]}),(0,Z.jsxs)("div",{className:I,children:[(0,Z.jsx)(A.A,{ccy:"ETH",className:M}),(0,Z.jsx)("div",{className:P,children:(0,Z.jsx)(h.A,{className:c()("okx-trading-selected",F)})})]}),(0,Z.jsxs)("div",{className:I,children:[(0,Z.jsx)(A.A,{ccy:"USDT",className:M}),(0,Z.jsx)("div",{className:P,children:(0,Z.jsx)(h.A,{className:c()("okx-trading-selected",F)})})]})]}),(0,Z.jsx)("div",{className:T,children:(0,r.kW)("trade_home_desc_collateral_crypto")})]}),(0,Z.jsx)("div",{className:R,children:(0,Z.jsx)(h.A,{className:c()("okx-trading-arrow-up",K)})}),(0,Z.jsx)("div",{className:G,children:x})]}),(0,Z.jsxs)("div",{className:q,children:[(0,Z.jsxs)("div",{className:c()(D),children:[(0,Z.jsx)("div",{className:c()(B),children:(0,r.kW)("trade_home_title_non_collateral_crypto")}),(0,Z.jsx)("div",{className:W,children:(0,Z.jsx)("div",{className:O,children:(0,Z.jsx)(h.A,{className:c()("okx-trading-window-manager",Q)})})}),(0,Z.jsx)("div",{className:T,children:(0,r.kW)("trade_home_desc_non_collateral_crypto")})]}),(0,Z.jsx)("div",{className:R,children:(0,Z.jsx)(h.A,{className:c()("okx-trading-arrow-up",K)})}),(0,Z.jsx)("div",{className:G,children:(0,r.kW)("trade_home_title_non_collateral_spot")})]})]}),(0,Z.jsx)(m.A,{when:!a,children:(0,Z.jsx)("div",{className:U,children:(0,Z.jsxs)(_.A,{className:Y,target:"_blank",rel:"noopener noreferrer",href:(0,d.CZ)(v.j$),size:_.A.SIZE.sm,type:_.A.TYPE.secondary,weight:_.A.WEIGHT.muted,hoverLine:!1,children:[(0,r.kW)("commonall_text_btn_learn_more"),(0,Z.jsx)(h.A,{className:"okds-arrow-chevron-right-centered-md"})]})})})]})})}));var X=i(39351),J=i(5249);const V=function(e){var t=e.from;return(0,Z.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,r.kW)("trade_home_dialog_header_set_margin_collateral"),(0,Z.jsx)(X.A,{onVisibleChange:function(e){e&&(t===v.YM.SETTING?(0,J.lGf)():(0,J.rzn)())},description:(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{children:(0,r.kW)("trade_home_tooltips_desc_set_margin_collateral")}),(0,Z.jsx)(_.A,{style:{marginTop:8},target:"_blank",rel:"noopener noreferrer",href:(0,d.CZ)(v.j$),size:_.A.SIZE.sm,type:_.A.TYPE.secondary,weight:_.A.WEIGHT.muted,hoverLine:!1,children:(0,Z.jsxs)("span",{style:{display:"flex",fontSize:12},children:[(0,r.kW)("commonall_text_btn_learn_more"),(0,Z.jsx)(h.A,{className:"okds-arrow-chevron-right-centered-md"})]})})]}),children:(0,Z.jsx)(h.A,{style:{cursor:"pointer",color:"var(--okd-color-content-contrast)"},className:"okx-trading-information"})})]})};var $=i(67146),ee=i(67939),te=i(28490);const ie="index_collateral-coin-select-dialog-content__zRPUi",ne="index_dialog-desc__DvVKT",oe="index_cards-wrapper__dWT-J",ae="index_card__ZIAPh",ce="index_active__5IZYL",se="index_disabled__TxtVl",re="index_card-title__5tNau",le="index_card-desc__878Hs",de="index_card-info__15XaF",ue="index_tag__U--TP",he="index_right-icon__dEa-N",_e="index_disable-tips__9Hlv4",Ae="index_content-loading__sYEao",me="index_footer-wrapper__uzyoo",ve="index_loading__nRWLJ",fe="index_selected-info__quQaB",pe="index_equity-msg__TGARe",ye="index_equity-low__MWD57",ge="index_low-icon__92tXY",xe="index_equity-wrapper__VYjoQ";var Ce=i(21128);const be=(0,s.observer)((function(e){var t,i=e.type,n=Ce.A.coinInfo.recommendGroup,o=null===(t=k.A.collateralCoinConfig)||void 0===t?void 0:t.existConfig;return(0,Z.jsx)(m.A,{when:n===i&&o===v.yo.DISABLE,children:(0,Z.jsx)(te.A,{className:ue,children:(0,r.kW)("social_home_tag_recommended_collateral")})})}));const ke=(0,s.observer)((function(){var e=Ce.A.selectedCoinNum,t=Ce.A.activeType,i=Ce.A.contentLoading,n=Ce.A.stableCoins,o=Ce.A.enableStableSelect;if(i)return(0,Z.jsx)(ee.A,{className:Ae});var a="".concat((0,r.kW)("trade_common_punctuation_comma"));return(0,Z.jsxs)("div",{className:ie,children:[(0,Z.jsx)("div",{className:ne,children:(0,r.kW)("trade_home_dialog_desc_set_margin_collateral")}),(0,Z.jsx)("div",{className:ne,children:(0,r.kW)("trade_home_dialog_desc_set_margin_collateral_options")}),(0,Z.jsxs)("div",{className:oe,children:[(0,Z.jsx)($.A,{onClick:function(){g.A.handleCardClick(v.hQ.STABLE)},className:c()(ae,t===v.hQ.STABLE?ce:"",o?"":se),disabled:!o,children:(0,Z.jsxs)("div",{className:de,children:[(0,Z.jsxs)("div",{className:re,children:[(0,r.kW)("trade_home_dialog_option_only_stablecoins"),(0,Z.jsx)(be,{type:v.hQ.STABLE})]}),(0,Z.jsx)("div",{className:le,children:(0,r.kW)("trade_home_dialog_desc_only_stablecoins",{ccy:n.map((function(e){return e.ccy})).join(a)})}),(0,Z.jsx)("div",{className:le,children:(0,r.kW)("trade_home_dialog_desc_only_stablecoins_isolate_risk")})]})}),(0,Z.jsx)(m.A,{when:!o,children:(0,Z.jsx)("div",{className:_e,children:(0,r.kW)("trade_collateral_tab_error_cannot_stablecoin")})}),(0,Z.jsx)($.A,{onClick:function(){g.A.handleCardClick(v.hQ.ALL)},className:c()(ae,t===v.hQ.ALL?ce:""),children:(0,Z.jsxs)("div",{className:de,children:[(0,Z.jsxs)("div",{className:re,children:[(0,r.kW)("trade_home_dialog_option_all_crypto"),(0,Z.jsx)(be,{type:v.hQ.ALL})]}),(0,Z.jsx)("div",{className:le,children:(0,r.kW)("trade_home_dialog_desc_all_crypto")}),(0,Z.jsx)("div",{className:le,children:(0,r.kW)("trade_home_dialog_desc_all_crypto_flexibility_efficiency")})]})}),(0,Z.jsxs)($.A,{onClick:function(){g.A.handleCardClick(v.hQ.CUSTOM)},className:c()(ae,t===v.hQ.CUSTOM?ce:""),children:[(0,Z.jsxs)("div",{className:de,children:[(0,Z.jsxs)("div",{className:re,children:[(0,r.kW)("trade_home_dialog_option_custom_collateral"),(0,Z.jsx)(be,{type:v.hQ.CUSTOM})]}),(0,Z.jsx)("div",{className:le,children:(0,r.kW)("trade_home_dialog_desc_custom_collateral")}),(0,Z.jsx)("div",{className:le,children:(0,r.kW)("trade_home_dialog_desc_custom_collateral_currently_selected",{num:e})})]}),(0,Z.jsx)(h.A,{className:c()("okds-arrow-chevron-right-centered-md",he)})]})]})]})}));var je=i(4613),Se=i(89208),we=i(62576),Ee=i(3471),Ne=i(98732),Le=i(28494),qe=i(83268);const Te=(0,s.observer)((function(){var e=Ce.A.equityData,t=Ce.A.equityCalculating,i=Ce.A.confirmLoading,n=e.acctAdjEquity,o=e.acctAvaMargin,a=Number(o)<0,s=a?(0,r.kW)("trade_home_tooltips_adjusted_equity_too_low"):(0,r.kW)("trade_home_tooltips_adjusted_equity_usdt_value");return(0,Z.jsxs)("div",{className:me,children:[(0,Z.jsx)("div",{className:fe,children:(0,Z.jsxs)("div",{className:xe,children:[(0,Z.jsx)(X.A,{description:(0,r.kW)("trade_home_tooltips_desc_collateral_adjusted_equity"),width:240,children:(0,Z.jsx)("div",{className:c()("has-tooltip",pe),children:(0,r.kW)("trade_home_collateral_adjusted_equity")})}),(0,Z.jsxs)(m.A,{when:!t,children:[(0,Z.jsxs)("div",{className:a?ye:"",children:["$",(0,qe.e5)({value:n,digit:0===Number(n)?v.X$:v.pg,decimal:Le.SC.DOWN,needZero:!1})]}),(0,Z.jsx)(je.A,{size:je.A.SIZE.sm,description:s,width:240,delayShow:Ne.y,alwaysUpdatePopper:!0,graspBaseDom:!0,children:(0,Z.jsx)(h.A,{className:c()("okx-trading-information",ge)})})]}),(0,Z.jsxs)(m.A,{when:t,children:[(0,Z.jsx)(Se.A,{size:Se.A.SIZE.sm,className:ve}),(0,Z.jsx)("div",{children:(0,r.kW)("trade_home_calculating_adjusted_equity")})]})]})}),(0,Z.jsx)(Ee.A,{sm:(0,Z.jsx)(we.A,{loading:i,category:we.A.CATEGORY.fill,type:we.A.TYPE.highlight,size:we.A.SIZE.sm,style:{marginTop:"24px",width:"100%"},onClick:g.A.handleConfirm,children:(0,r.kW)("commonall_text_btn_confirm")}),md:(0,Z.jsx)(we.A,{loading:i,category:we.A.CATEGORY.fill,type:we.A.TYPE.highlight,size:we.A.SIZE.sm,onClick:g.A.handleConfirm,children:(0,r.kW)("commonall_text_btn_confirm")})})]})}));const Be=(0,s.observer)((function(e){var t=e.visible,i=e.onConfirm,n=e.onClose,a=e.onCustomClick,c=e.isFromSwitchAccount;return(0,o.useEffect)((function(){t&&g.A.init({onClose:n,onConfirm:i,onCustomClick:a,visible:t,isFromSwitchAccount:c})}),[t]),(0,Z.jsx)(u.A.Action,{confirmLoading:Ce.A.confirmLoading,onClose:g.A.closeDialog,visible:Ce.A.visible,title:(0,Z.jsx)(V,{from:v.YM.QUICK}),footer:(0,Z.jsx)(Te,{}),width:v.eX,children:(0,Z.jsx)(ke,{})})}));var De=i(5544),We=i(72768),Ie=i(72849),Me=i(94975),Pe=i(95577),Fe=i(73942);const Oe="index_collateral-coin-setting-dialog-content__+1O02",Qe="index_coin-quick-select-wrapper__5Nm7k",Re="index_all-select-tips__-vrby",Ke="index_list-title__EwFTI",Ge="index_coin-list-wrapper__awh17",Ue="index_content-loading__3r4kl",Ye="index_footer-wrapper__WSZhJ",Ze="index_loading__drPvD",He="index_selected-info__IzghC",ze="index_equity-msg__msPOk",Xe="index_equity-low__JLjpA",Je="index_low-icon__G1gJY",Ve="index_equity-wrapper__jvCRA";var $e=i(83591);const et=(0,s.observer)((function(){return(0,Z.jsx)("div",{className:Ge,children:$e.A.filteredCoinList.map((function(e){return(0,Z.jsx)(Pe.A,{disabled:e.required===v.yo.ENABLE,checked:$e.A.coinSelectMap[e.ccy],onChange:function(t){Fe.A.handleCoinSelectChange(e,t.target.checked)},children:e.ccy},e.ccy)}))})}));const tt=(0,s.observer)((function(){var e,t,i;return(0,Z.jsxs)("div",{className:Qe,children:[(0,Z.jsx)(Pe.A,{checked:$e.A.isAllStableSelect,onChange:function(e){Fe.A.handleQuickSelectChange(v.hQ.STABLE,e.target.checked)},children:(0,r.kW)("trade_home_checkbox_all_stablecoins_collateral",{num:null===(e=$e.A.stableCoins)||void 0===e?void 0:e.length})}),(0,Z.jsx)(Pe.A,{checked:$e.A.isAllTopSelect,onChange:function(e){Fe.A.handleQuickSelectChange(v.hQ.TOP,e.target.checked)},children:(0,r.kW)("trade_home_checkbox_popular_crypto_collateral",{num:null===(t=$e.A.topCoins)||void 0===t?void 0:t.length})}),(0,Z.jsx)(Pe.A,{checked:$e.A.isAllCoinsSelect,onChange:function(e){Fe.A.handleQuickSelectChange(v.hQ.ALL,e.target.checked)},children:(0,r.kW)("trade_home_checkbox_all_crypto_collateral",{num:null===(i=$e.A.coinList)||void 0===i?void 0:i.length})})]})}));const it=(0,s.observer)((function(){var e=(0,o.useState)(""),t=(0,De.A)(e,2),i=t[0],n=t[1];return $e.A.contentLoading?(0,Z.jsx)(ee.A,{className:Ue}):(0,Z.jsxs)("div",{className:Oe,children:[(0,Z.jsx)(We.A.Search,{placeholder:(0,Me.G)("trade_bot_input_search"),value:i,onFocus:function(){(0,J.IPS)()},onChange:function(e){var t=e.target.value;n(t),(0,Ie.JF)((function(){Fe.A.handleSearch(t)}))}}),(0,Z.jsx)(tt,{}),(0,Z.jsx)(m.A,{when:$e.A.isAllCoinsSelect,children:(0,Z.jsx)("div",{className:Re,children:(0,r.kW)("trade_home_desc_all_crypto_collateral")})}),(0,Z.jsx)("div",{className:Ke,children:(0,r.kW)("trade_home_available_collateral")}),(0,Z.jsx)(et,{})]})}));const nt=(0,s.observer)((function(){var e=$e.A.equityData,t=$e.A.selectedCoinNum,i=$e.A.equityCalculating,n=$e.A.confirmLoading,o=e.acctAdjEquity,a=e.acctAvaMargin,s=Number(a)<0,l=s?(0,r.kW)("trade_home_tooltips_adjusted_equity_too_low"):(0,r.kW)("trade_home_tooltips_adjusted_equity_usdt_value");return(0,Z.jsxs)("div",{className:Ye,children:[(0,Z.jsxs)("div",{className:He,children:[(0,Z.jsx)("div",{children:(0,r.kW)("trade_home_select_selected_collateral",{num:"".concat(t)})}),(0,Z.jsxs)("div",{className:Ve,children:[(0,Z.jsx)(X.A,{description:(0,r.kW)("trade_home_tooltips_desc_collateral_adjusted_equity"),width:240,children:(0,Z.jsx)("div",{className:c()("has-tooltip",ze),children:(0,r.kW)("trade_home_collateral_adjusted_equity")})}),(0,Z.jsxs)(m.A,{when:!i,children:[(0,Z.jsxs)("div",{className:s?Xe:"",children:["$",(0,qe.e5)({value:o,digit:0===Number(o)?v.X$:v.pg,decimal:Le.SC.DOWN,needZero:!1})]}),(0,Z.jsx)(je.A,{size:je.A.SIZE.sm,description:l,width:240,delayShow:Ne.y,alwaysUpdatePopper:!0,graspBaseDom:!0,children:(0,Z.jsx)(h.A,{className:c()("okx-trading-information",Je)})})]}),(0,Z.jsxs)(m.A,{when:i,children:[(0,Z.jsx)(Se.A,{size:Se.A.SIZE.sm,className:Ze}),(0,Z.jsx)("div",{children:(0,r.kW)("trade_home_calculating_adjusted_equity")})]})]})]}),(0,Z.jsx)(Ee.A,{sm:(0,Z.jsx)(we.A,{loading:n,category:we.A.CATEGORY.fill,type:we.A.TYPE.highlight,size:we.A.SIZE.sm,style:{marginTop:"24px",width:"100%"},onClick:Fe.A.handleConfirm,children:(0,r.kW)("commonall_text_btn_confirm")}),md:(0,Z.jsx)(we.A,{loading:n,category:we.A.CATEGORY.fill,type:we.A.TYPE.highlight,size:we.A.SIZE.sm,onClick:Fe.A.handleConfirm,children:(0,r.kW)("commonall_text_btn_confirm")})})]})}));const ot=(0,s.observer)((function(e){return(0,o.useEffect)((function(){e.visible&&Fe.A.init(e)}),[e.visible]),(0,Z.jsx)(u.A.Action,{onClose:Fe.A.closeDialog,visible:$e.A.visible,title:(0,Z.jsx)(V,{from:v.YM.SETTING}),width:v.eX,footer:(0,Z.jsx)(nt,{}),children:(0,Z.jsx)(it,{})})}))},63510:(e,t,i)=>{i.d(t,{A:()=>s});var n=i(89379),o=i(30376),a=i(28494),c=i(22291);const s={getPositions:function(e){return(0,c.Jt)("".concat(o.x0,"/account/positions"),(0,n.A)({instType:a.gy.MARGIN},e))},getMarginBalance:function(e){return(0,c.fe)("".concat(o.x0,"/account/adjust-margin-balance"),(0,n.A)({posSide:a.bB.NET},e))},postModifyMargin:function(e){return(0,c.bE)("".concat(o.x0,"/account/position/margin-balance"),(0,n.A)({posSide:a.bB.NET},e))},getBorrowRepayInfo:function(e){return(0,c.fe)("".concat(o.x0,"/account/quick-margin-borrow-repay-tips"),e)},postBorrowRepay:function(e){return(0,c.bE)("".concat(o.x0,"/account/quick-margin-borrow-repay"),e)},postQuickMarginPopup:function(){return(0,c.bE)("".concat(o.x0,"/account/user/gray/set-pop-up"))},getCollateralAssets:function(){return(0,c.fe)("".concat(o.x0,"/account/collateral-assets"))},postCollateralAssetsPreCheck:function(e){return(0,c.bE)("".concat(o.x0,"/account/set-collateral-assets-pre-check"),e)},postCollateralAssets:function(e){return(0,c.bE)("".concat(o.x0,"/account/set-collateral-assets"),e)},postCollateralAssetsSwitchPreCheck:function(e){return(0,c.bE)("".concat(o.x0,"/account/set-account-switch-precheck"),e)}}},94975:(e,t,i)=>{i.d(t,{G:()=>n});var n=(0,i(4536).OS)({useBr:!1})},82193:()=>{}}]);
//# sourceMappingURL=https://static-daily.okg.com/crash/okfe/comb-trade/src_common_pages_trade_modules_TradeDialogs_CollateralCoinDialogs_core_index_tsx-src_common_f-e64599/index.c0907c20.js.map