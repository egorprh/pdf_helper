"use strict";(self.webpackChunkcomb_trade=self.webpackChunkcomb_trade||[]).push([["sw_bundle_spotToolAction","sw_bundle_PlaceOrder-actions-futureAction"],{51817:(e,t,r)=>{r.d(t,{HR:()=>p,Hl:()=>v,IV:()=>d,Jw:()=>l,QW:()=>g,RX:()=>f,U9:()=>m,VW:()=>y,Zp:()=>n,dz:()=>c,gc:()=>O,lb:()=>P,lm:()=>T,m1:()=>s,t7:()=>o,u2:()=>S,xO:()=>A,yc:()=>u});var i=r(4536),a=r(6861),o=6,n=5,l=["USDT","BTC","ETH","OKB"],c=["BTC","USDT","ETH"],s={REPAY:0,EXCHANGE:1},u=4,d=16,p={TRADE:0,FUND:1},A={ONE_CLICK_REPAY:0,EASY_CONVERT:1},y="".concat(a.Zi).concat(a.yZ.ORDER_HISTORY,"?ordType=convert"),g=function(){return[{label:(0,i.kW)("trade_convert_select_text_trading_account"),value:p.TRADE},{label:(0,i.kW)("trade_convert_select_text_fund_account"),value:p.FUND}]},v=12,m={EASY_CONVERT:"easyConvert",ONE_CLICK_REPAY:"oneClickRepay"},T={SUPPORT:"1",UN_SUPPORT:"2"},f={NOT_MORTGAGE:"0",IS_MORTGAGE:"1",PLATFORM_COLLATERAL_LIMIT_ENABLED:"2"},P=15,S={TRADE:"trade",ASSET_TRADING:"asset_trading",ASSET_FUNDING:"asset_funding",ONSHORE_PORTFOLIO:"onshore_portfolio"},O={EASY_CONVERT:"easy_convert",HISTORY:"history",EXIT:"exit"}},46568:(e,t,r)=>{r.d(t,{A:()=>m});var i=r(89379),a=r(23029),o=r(92901),n=r(44497),l=r(63010),c=r(75376),s=r(88524),u=r(15227),d=r(84313),p=r(28494),A=r(25594),y=r(63610),g=r(94779),v={triggerPriceType:u.yj,tpTriggerPriceType:u.lw,slTriggerPriceType:u.K8},m=function(){return(0,o.A)((function e(){(0,a.A)(this,e),this.updateTpOrdKind=function(e){var t=e.form,r=e.value,i={tpOrdKind:r};if(r===d.IZ.LIMIT){var a=t.tpTriggerPx;i.tpTriggerPx="",i.tpOrdPx=a||(t.tpOrdPx>0?t.tpOrdPx:"")}else{var o=t.tpOrdPx;i.tpTriggerPx=o>0?o:t.tpTriggerPx,i.tpOrdPx=p.gH}var n=l.A.get(u.vw)||{};return n.tpOrdKind=r,l.A.set(u.vw,n),Object.assign(t,i)},(0,n.makeObservable)(this,{updateForm:n.action})}),[{key:"updateForm",value:function(e){var t=e.key,r=e.value,a=e.form,o=e.direction,n=(0,i.A)({},a),m=g.A.orderType,T=c.A.instType,f=c.A.instId,P="left"===o;if(Number(r)&&"-1"!==r.toString()&&A.WW.includes(t)){var S=(0,y.B)({instType:T,instId:f,key:"field",value:r}),O=S.msg,h=S.tickPrice;n["".concat(t,"TickPrice")]=h,n.inputErrors[t]=O}switch(t){case"triggerPriceType":var b=r.value;n[t]=b,n.triggerPxTypeMap[m]=b,l.A.set(v[t],b),l.A.set(u.dh,n.triggerPxTypeMap);break;case"tpTriggerPriceType":case"slTriggerPriceType":var x=r.value;n[t]=x,l.A.set(v[t],x);break;case"isReduceOnly":r&&(n.isTpSl=!1,this.clearTpSlForm(n));break;case"isTpSl":r?(n.isReduceOnly=!1,this.initTpSlForm(n)):this.clearTpSlForm(n);break;case"tpOrdKind":Object.assign(n,this.updateTpOrdKind({form:n,value:r}));break;case"tpSimpleSettingMode":case"slSimpleSettingMode":var R="tpSimpleSettingMode"===t;Object.assign(n,R?{tpTriggerPx:"",tpOrdPx:n.tpOrdKind===d.IZ.LIMIT?"":s.Yo}:{slTriggerPx:"",slOrdPx:s.Yo});var M=r===p.ym.PROFIT_RATIO,k=l.A.get(u.vw)||{},I=k.tpProfitRatio,_=void 0===I?"":I,N=k.slProfitRatio,C=void 0===N?"":N;Object.assign(n,R?{tpProfitRatio:M&&Number(_)?_:""}:{slProfitRatio:M&&Number(C)?C:""});break;case"algoType":var F=l.A.get(u.zj)||{},E=F.tpSlType||[];E[P?0:1]=r,F.tpSlType=E,l.A.set(u.zj,F);break;case"advType":var B=l.A.get(u.zj)||{},L=B.advLimitType||[];L[P?0:1]=r,B.advLimitType=L,l.A.set(u.zj,B)}return n}},{key:"initTpSlForm",value:function(e){var t=g.A.supportTpLimit,r=g.A.supportProfitRatioSelect,i=l.A.get(u.vw)||{},a=i.tpOrdKind,o=i.tpSimpleSettingMode,n=i.slSimpleSettingMode,c=i.tpProfitRatio,A=void 0===c?"":c,y=i.slProfitRatio,v=void 0===y?"":y;Object.assign(e,{showAdvanceContent:!1,tpSlValues:[],tpTriggerPx:"",slTriggerPx:"",slOrdPx:s.Yo,tpProfit:"",slProfit:"",tpProfitRatio:"",slProfitRatio:""},r?{tpProfitRatio:o===p.ym.PROFIT_RATIO&&Number(A)?A:"",slProfitRatio:n===p.ym.PROFIT_RATIO&&Number(v)?v:"",tpSimpleSettingMode:o||p.ym.PRICE,slSimpleSettingMode:n||p.ym.PRICE}:{},t&&(r||a!==d.IZ.CONDITION)?{tpOrdKind:d.IZ.LIMIT,tpOrdPx:""}:{tpOrdKind:d.IZ.CONDITION,tpOrdPx:s.Yo})}},{key:"clearTpSlForm",value:function(e){Object.assign(e,{showAdvanceContent:!1,tpSlValues:[],tpTriggerPx:"",tpOrdPx:e.tpOrdKind===d.IZ.LIMIT?"":s.Yo,slTriggerPx:"",slOrdPx:s.Yo,tpProfit:"",slProfit:"",tpProfitRatio:"",slProfitRatio:""})}}])}()},49313:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Z});var i=r(64467),a=r(90675),o=r(10467),n=r(53986),l=r(89379),c=r(5544),s=r(23029),u=r(92901),d=r(39874),p=r(5182),A=r(85501),y=r(44497),g=r(63010),v=r(60713),m=r(71491),T=r(75376),f=r(98582),P=r(1280),S=r(42182),O=r(42400),h=r(15227),b=r(28494),x=r(51817),R=r(25594),M=r(39158),k=r(94779),I=r(37964),_=r(72512),N=r(52711),C=r(99713),F=r(88632),E=b.LT.SIZE_BASE,B=function(e){var t,r=e.px,i=e.isBuy,a=e.form,o=e.mainStore.showTotalLabelSelect,n=(null===(t=a.totalLabelSelected)||void 0===t?void 0:t.value)===E;return o&&i&&n?m._u.mul(r,m._u.add(1,.05)):r},L=r(48478),w=r(42429),D=r(55322),z=r(50347),q=r(46568),K=["key","value","direction"],Y=R.W4.LIMIT,U=R.W4.ADV,H=R.Mw.CONDITIONAL,j=R.Mw.OCO;const Z=new(function(e){function t(){var e;return(0,s.A)(this,t),(e=(0,d.A)(this,t)).onAvailChange=function(t){var r,i,a=t.cvtMaxAvailable,o=t.cvtMaxTrades,n=t.maxAvailable,l=t.params,s=t.direction,u="left"===s,d="".concat(s,"Form"),p=I.Ay[d];if(n){(0,F._i)({res:n,form:p,isBuy:u,param:l,cvtMaxAvailable:a,cvtMaxTrades:o}),(0,F.qL)({res:n,direction:s,param:l}),n.price&&e.updateForm({key:"price",value:n.price,direction:s}),I.Ay.shouldClearSize&&(e.clearSize({direction:s}),I.Ay.shouldClearSize=!1),null===(r=(i=e).updateAvailableCallback)||void 0===r||r.call(i,{direction:s});var A=I.Ay[d],y=k.A.orderTypeStatus,g=k.A.base,v=k.A.quote,m=T.A.coins,f=I.Ay.maxBalances,P=I.Ay.maxBuyAndSell,S=(0,c.A)(f,2),O=S[0],h=S[1];if(y.isAlgoType||(A.percent=e.calculatePercent({isBuy:u,form:A,baseBalance:O,quoteBalance:h})),y.isStop){var b=e.getShowTotal({form:A,isLeft:u}),R=A.size,M=A.total,_=(0,c.A)(P,1)[0],N=u?_:O;A.percent=b?(0,F.nq)({value:M,balance:h}):(0,F.nq)({value:R,balance:N})}var C=(m[u?g:v]||{}).collateralRestrict===x.RX.IS_MORTGAGE;C&&(A.isDisabledReduceOnly=C,A.isReduceOnly=!0),I.Ay.updateByKey(d,A)}},e.onAccountCheckedChange=function(e){var t=e.changeResult,r=(0,D.E$)().uuid,i=g.A.get(h.Cs)||{};i[r]=t,g.A.set(h.Cs,i),I.Ay.updateByKey(h.Cs,t)},e.getMaxDebounce=(0,v.A)((function(t){var r=t.direction;e.getMaxAvailable({direction:r})}),500),e.updateAvailableCallback=null,e}return(0,A.A)(t,e),(0,u.A)(t,[{key:"getMaxAvailable",value:function(e){var t=e.direction,r=e.shouldClearSize,i=void 0!==r&&r,a=e.updateAvailableCallback,o=void 0===a?S.x7:a,n="".concat(t,"Form"),c=I.Ay[n],s=I.Ay["".concat(t,"FormDisp")],u=c.isReduceOnly,d=c.ccy,p=T.A.instId,A=T.A.instType,y=k.A.tradeMode,g=k.A.showReduceOnly,v=k.A.orderType,f=k.A.levelInfo,P=k.A.orderTypeStatus,O=k.A.isSpotTraderChecked,h="left"===t,x=(0,l.A)({instId:p,tdMode:(0,C.im)({instId:p,instType:A,isSpotTraderChecked:O}),side:h?R.g2.BUY:R.g2.SELL,posMode:b.fr.NET_MODE},(0,F.es)({form:c,direction:t})),M=this.getAvailPrice({form:c,formDisp:s,isBuy:h});M&&(x.px=m._u.toPlainString(M)),x.reduceOnly=g&&u,I.Ay.showCcy&&(x.ccy=d);var N=P.isMoveStop;x.reduceOnly&&(0,w.h0)({instType:A,tdMode:y})&&(x.baseOnPositionDebt=!N);var E={orderType:v,levelInfo:f};this.updateAvailableCallback=o,(0,_.jh)({store:I.Ay,params:(0,l.A)((0,l.A)({},x),E),direction:t}),I.Ay.shouldClearSize=i}},{key:"clearSize",value:function(e){var t=e.direction,r="left"===t,i="".concat(t,"Form"),a=I.Ay[i];if(k.A.orderTypeStatus.isStop){var o=this.getShowTotal({form:a,isLeft:r})?"total":"size";this.updateForm({key:o,value:"",direction:t})}}},{key:"getSingleMarginTPSLPrice",value:function(e){var t=T.A.instId,r=e.orderPrice,i=e.triggerPrice,a=e.tpTriggerPrice,o=e.slTriggerPrice,n=e.tpOrderPrice,l=e.slOrderPrice,c=e.algoType,s={};c===H&&(s={triggerPx:i,px:r}),c===j&&(s={tpTriggerPx:a,slTriggerPx:o,tpOrdPx:n,slOrdPx:l});var u=I.Ay.side;return(0,P.jp)({instId:t,priceSet:s,side:u}).price}},{key:"getAvailPrice",value:function(e){var t=e.form,r=e.formDisp,i=e.isBuy,a=k.A.orderType,o=k.A.orderTypeStatus,n=k.A.tradeMode,l=t.price,c=t.algoType,s=t.isReduceOnly,u=T.A.instType;return(0,w.qZ)({instType:u,isReduceOnly:s,tdMode:n,hasMove:!1})?this.getSingleMarginTPSLPrice(t):[Y,U].includes(a)&&l?l:o.isStop&&c===H||o.isTrigger?function(e){var t=e.form,r=e.formDisp,i=e.isBuy,a=e.mainStore,o=t.triggerPrice,n=t.orderPrice,l=t.isReduceOnly;if(!N.A.checkIsNotEmpty(o,n))return 0;var c=B({px:o,isBuy:i,form:t,mainStore:a}),s=a.isSolidMargin,u=a.base,d=a.showQuickMargin,p=(0,L._)(n)?c:n;if(d||!s||s&&l)return p;var A=r.ccy===u;return i&&A||!i&&!A?N.A.getMaxNumber(c,n):i&&!A?p:0}({form:t,formDisp:r,isBuy:i,mainStore:k.A}):o.isStop&&c===j?function(e){var t=e.form,r=e.formDisp,i=e.isBuy,a=e.mainStore,o=t.tpTriggerPrice,n=t.tpOrderPrice,l=t.slTriggerPrice,c=t.slOrderPrice,s=t.isReduceOnly;if(!N.A.checkIsNotEmpty(o,n,l,c))return 0;var u=B({px:o,isBuy:i,form:t,mainStore:a}),d=B({px:l,isBuy:i,form:t,mainStore:a}),p=a.isSolidMargin,A=a.showQuickMargin,y=a.base,g=(0,L._)(n)?u:n,v=(0,L._)(c)?d:c,m=(0,L._)(n)&&(0,L._)(c);if((A||!p||p&&s)&&i)return N.A.getMaxNumber(g,v);if(A&&!i)return 0;var T=r.ccy===y,f=N.A.getMaxNumber(u,n),P=N.A.getMaxNumber(d,c);return p&&i&&T&&!m?N.A.getMaxNumber(f,P):p&&i&&T&&m?u:p&&i&&!T&&!m?N.A.getMaxNumber(g,v):!p||i||T?0:N.A.getMaxNumber(f,P)}({form:t,formDisp:r,isBuy:i,mainStore:k.A}):0}},{key:"calculatePercent",value:function(e){var t=e.isBuy,r=e.form,i=e.quoteBalance,a=e.baseBalance,o=r.size,n=r.total,l=t?n:o,c=t?i:a;return(0,F.nq)({value:l,balance:c})}},{key:"updateNormalForm",value:function(e){var t=e.key,r=e.value,i=e.form,a=e.direction,o=e.formName,n=e.maxTotal,s=k.A.pricePrecision,u=k.A.orderTypeStatus,d=I.Ay.maxBalances,p="left"===a,A=(0,l.A)({},i),y=(0,c.A)(d,2),g=y[0],v=y[1],T={isBuy:p,form:A,value:r,formName:o},f={price:F.$u,size:F.NX,total:F.iu,percent:F.Nn}[t];if(f&&(A.percentChanged=u.isLimit&&"percent"===t,f(T)),["price","size","total"].includes(t)){A.percent=this.calculatePercent({isBuy:p,form:A,baseBalance:g,quoteBalance:v});var P=A.total;n&&P&&Number(P)>Number(n)&&(A.total=m._u.floorTruncate(n,s,!1))}return A}},{key:"updateStopAlgoForm",value:function(e){var t=e.key,r=e.value,i=e.form,a=e.direction,o=e.formName,n=I.Ay.maxBalances,s=I.Ay.maxBuyAndSell,u="left"===a,d=(0,l.A)({},i),p=d.size,A=d.total,y=(0,c.A)(n,2),g=y[0],v=y[1],m=(0,c.A)(s,1)[0],T=u?m:g,f=this.getShowTotal({form:d,isLeft:u});return"percent"===t&&r!==I.Ay[o].percent&&(0,F.iv)({percent:r,showAlgoTotal:f,form:d,quoteBalance:v,sizeBalance:T}),"total"===t&&f&&(d.percent=(0,F.nq)({value:A,balance:v})),"size"!==t||f||(d.percent=(0,F.nq)({value:p,balance:T})),d}},{key:"isNeedUpdateMax",value:function(e,t){if("algoType"===e){var r="".concat(t,"Form"),i=I.Ay[r],a=T.A.instType,o=k.A.tradeMode,n=i.isReduceOnly;return(0,w.qZ)({instType:a,tdMode:o,isReduceOnly:n,hasMove:!1})}return!1}},{key:"updateForm",value:function(e){var r=e.key,i=e.value,a=e.direction,o=(0,n.A)(e,K),c=k.A.orderTypeStatus,s="".concat(a,"Form"),u=(0,l.A)({},I.Ay[s]);u[r]=i;var d=["isReduceOnly","ccy"].includes(r);(u=(0,p.A)(t,"updateForm",this,3)([{key:r,value:i,form:u,direction:a}]),"tradeQuoteCcy"===r)&&(!(0,O.OF)(O.q1.PAY_WITH)&&(u.size="",u.total=""));if("ccy"===r){var A=T.A.instId,y=g.A.get(h.lR)||{},v=y[A]||{};v[a]=i,y[A]=v,g.A.set(h.lR,y)}c.isAlgoType||d||(u=this.updateNormalForm((0,l.A)({key:r,value:i,form:u,direction:a,formName:s},o))),c.isStop&&!d&&(u=this.updateStopAlgoForm((0,l.A)({key:r,value:i,form:u,direction:a,formName:s},o))),I.Ay.updateByKey(s,u);var m=(0,F.IH)({formName:s,key:r});d?this.getMaxAvailable({direction:a}):(this.isNeedUpdateMax(r,a)||m)&&this.getMaxDebounce({direction:a})}},{key:"updateFormPrice",value:function(e){var t=k.A.pricePrecision,r=N.A.getStepByInput({num:e,precision:t});I.Ay.update({leftForm:(0,l.A)((0,l.A)({},I.Ay.leftForm),{},{price:e,priceStep:r}),rightForm:(0,l.A)((0,l.A)({},I.Ay.rightForm),{},{price:e,priceStep:r})}),this.getMax({quiet:!1})}},{key:"clearForm",value:function(){var e=(0,o.A)((0,a.A)().mark((function e(){var t,r,i,o,n,c,s,u,d,p,A,v,m,P,S,O,b,x,R=this,M=arguments;return(0,a.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=M.length>0&&void 0!==M[0]?M[0]:{}).lastPrice,i=t.formUpdate,o=void 0===i?{}:i,n=I.Ay.baseForm,c=I.Ay.leftForm,s=I.Ay.rightForm,u=I.Ay.totalLabelOptions,d=I.Ay.shouldUpdateLastPrice,p=k.A.isSolidMargin,A=T.A.instId,v=T.A.instType,e.next=6,f.A.getConfig({instId:A,instType:v});case 6:if(m=e.sent,P=m.ccyName,S=g.A.get(h.lR)||{},O=S[A]||{},b=(0,l.A)((0,l.A)({},n),{},{ccy:O.left||P,isReduceOnly:!!p&&c.isReduceOnly,totalLabelSelected:g.A.get(h.hz)||u[0],triggerPxTypeMap:c.triggerPxTypeMap,algoType:c.algoType,advType:c.advType},o),x=(0,l.A)((0,l.A)({},n),{},{ccy:O.right||P,isReduceOnly:!!p&&s.isReduceOnly,totalLabelSelected:g.A.get(h.vT)||u[1],triggerPxTypeMap:s.triggerPxTypeMap,algoType:s.algoType,advType:s.advType},o),I.Ay.update({leftForm:b,rightForm:x}),!r||!d){e.next=16;break}return this.updateFormPrice(r),e.abrupt("return");case 16:this.lastPriceHandler&&this.lastPriceHandler(),this.lastPriceHandler=(0,y.when)((function(){return z.A.ticker.instId===A&&z.A.ticker.last&&I.Ay.shouldUpdateLastPrice}),(function(){R.updateFormPrice(z.A.ticker.last)})),setTimeout((function(){z.A.ticker.last||R.getMax()}),1e3);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.quiet,r=e.noErrorAlert;M.A.isDoubleCols?(this.getMaxAvailable({direction:"left",quiet:t,noErrorAlert:r}),this.getMaxAvailable({direction:"right",quiet:t,noErrorAlert:r})):this.getMaxAvailable({direction:I.Ay.side===R.g2.BUY?"left":"right",quiet:t,noErrorAlert:r})}},{key:"onLabelSelectedChange",value:function(e){var t=e.key,r=e.value,a=e.direction,o="left"===a?h.hz:h.vT;g.A.set(o,r),I.Ay.update((0,i.A)({},"".concat(a,"Form"),(0,l.A)((0,l.A)({},I.Ay["".concat(a,"Form")]),{},(0,i.A)({},t,r))))}},{key:"getShowTotal",value:function(e){var t=e.form,r=e.isLeft,i=T.A.instStatus;return L.A.getAlgoTotalVisibility({mainStore:k.A,instStatus:i,isLeft:r,form:t})}}])}(q.A))}}]);
//# sourceMappingURL=https://static-daily.okg.com/crash/okfe/comb-trade/sw_bundle_spotToolAction/index.4dad893e.js.map